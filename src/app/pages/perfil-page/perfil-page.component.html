<app-task-navbar></app-task-navbar>

<div class="container">
    <app-task-sidebar></app-task-sidebar>
    
    <div class="profile">

      <span [ngClass]="{ 'alert': true, 'error': hasError, 'success': hasSuccess }">{{ alert }} <button  (click)="CloseAlert()">x</button></span>
      <div class="grid-template">
        <div class="card">
          <span class="card-span"><i class="bi bi-person icon"></i></span>
          <div class="user-elements">
              <p class="username">{{ userInfo()!.name }} {{ userInfo()!.lastname }}</p>
              <p class="useradress">{{ userInfo()!.email }}</p>
          </div>
          <div class="task-elements">
              <p class="user-tasks">{{ quantTaskCompleted }} tasks completeds</p>
              <p class="user-tasks">{{ quantTask }} tasks in development</p> 
          </div>
        </div>

        <div class="btns">
          <button (click)="OpenModalSecond()">Edit</button>
          <button (click)="OpenModal()">Delete</button>
        </div>
      </div>     
    </div>

</div>

<div [ngClass]="{'modal': true, 'open': modalClass}" (click)="OnModalClick($event)">
  <div class="modal-content">
    <button class="icon" (click)="CloseModal()"><i class="bi bi-x-lg"></i></button>
    <p>Do you really want to delete your account?</p>
    <p>your account will be deactivated for a period of 30 days</p>
    <div>
      <button (click)="CloseModal()">Cancel</button>
      <button (click)="DeleteUser()">Continue</button>
    </div>
  </div>
</div>




<div [ngClass]="{'modal': true, 'open': modalClass2 }">
  <div class="modal-content-edit">
    <div class="modal-header">
      <p>Edit user data</p>
      <button class="icon" (click)="CloseModalSecond()"><i class="bi bi-x-lg"></i></button>
    </div>
    <div class="modal-article">
      <form data-form action="">

        <div class="input-box">
            <input data-input="name" type="text" name="name" placeholder="First Name" autocomplete="off" minlength="3" maxlength="25" [(ngModel)] = "name">
            <i class="bi bi-person-fill icon"></i>
        </div>
        <div class="input-box">
            <input data-input="lastname" type="text" name="lastname" placeholder="Last Name" autocomplete="off" minlength="3" maxlength="25" [(ngModel)] = "lastname">
            <i class="bi bi-person-fill icon"></i>
        </div>
        <div class="input-box2">
            <input data-input="email" type="email" name="email" placeholder="Email" autocomplete="off" [(ngModel)] = "email">
            <i class="bi bi-envelope-fill icon"></i>
        </div>
        <div class="input-box">
            <input data-input="password" type="password" name="password" placeholder="Password" required minlength="6" maxlength="32" [(ngModel)] = "password" [ngClass]="{'invalid-input': arePasswordsDifferent}">
            <i class="bi bi-person-fill-lock icon "></i>
        </div>
        <div class="input-box">
            <input data-input="password2" type="password" name="password" placeholder="Repeat Password" required minlength="6" maxlength="32" [(ngModel)] = "password2" [ngClass]="{'invalid-input': arePasswordsDifferent}">
            <i class="bi bi-person-fill-lock icon "></i>
        </div>
    </form>
    </div>
    <div class="modal-footer">
      <button (click)="CloseModalSecond()">Cancel</button>
      <button (click)="EditUser()">Save</button>
    </div>
  </div>
</div>